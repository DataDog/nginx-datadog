load_module modules/ngx_http_datadog_module.so;

events {
    worker_connections  1024;
}

http {
    datadog_agent_url http://agent:8126;
    # This datadog_sample_rate directive will apply to all servers and locations
    # below, unless those servers and/or locations have their own
    # datadog_sample_rate directives.
    datadog_sample_rate 0.42;

    server {
        listen       80;
        server_name  localhost;

        # This datadog_sample_rate directive will apply to all locations below,
        # overriding the http-level directive above, unless those locations have
        # their own datadog_sample_rate directives.
        datadog_sample_rate 0.42;

        location /http {
            # This datadog_sample_rate directive will apply to this location
            # only, overriding the server-level and http-level directives above.
            datadog_sample_rate 0.42;

            proxy_pass http://http:8080;
        }
    }
}
