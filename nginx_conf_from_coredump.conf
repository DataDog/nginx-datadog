
# Configuration checksum: 10999271687642907205

# setup custom paths that do not require root access
pid /tmp/nginx/nginx.pid;

load_module /etc/nginx/modules/ngx_http_brotli_filter_module.so;
load_module /etc/nginx/modules/ngx_http_brotli_static_module.so;

daemon off;

worker_processes 1;

worker_rlimit_nofile 1047552;

worker_shutdown_timeout 240s ;

thread_pool waf_thread_pool threads=2 max_queue=512;
load_module /modules_mount/ngx_http_datadog_module.so;

events {
	multi_accept        on;
	worker_connections  16384;
	use                 epoll;
	
}

http {
	
	lua_package_path "/etc/nginx/lua/?.lua;;";
	
	lua_shared_dict balancer_ewma 10M;
	lua_shared_dict balancer_ewma_last_touched_at 10M;
	lua_shared_dict balancer_ewma_locks 1M;
	lua_shared_dict certificate_data 20M;
	lua_shared_dict certificate_servers 5M;
	lua_shared_dict configuration_data 20M;
	lua_shared_dict ocsp_response_cache 5M;
	
	lua_shared_dict luaconfig 5m;
	
	init_by_lua_file /etc/nginx/lua/ngx_conf_init.lua;
	
	init_worker_by_lua_file /etc/nginx/lua/ngx_conf_init_worker.lua;
	
	real_ip_header      CF-Connecting-IP;
	
	real_ip_recursive   on;
	
	set_real_ip_from    130.211.0.0/22;
	
	set_real_ip_from    35.191.0.0/16;
	
	set_real_ip_from    173.245.48.0/20;
	
	set_real_ip_from    103.21.244.0/22;
	
	set_real_ip_from    103.22.200.0/22;
	
	set_real_ip_from    103.31.4.0/22;
	
	set_real_ip_from    141.101.64.0/18;
	
	set_real_ip_from    108.162.192.0/18;
	
	set_real_ip_from    190.93.240.0/20;
	
	set_real_ip_from    188.114.96.0/20;
	
	set_real_ip_from    197.234.240.0/22;
	
	set_real_ip_from    198.41.128.0/17;
	
	set_real_ip_from    162.158.0.0/15;
	
	set_real_ip_from    104.16.0.0/13;
	
	set_real_ip_from    104.24.0.0/14;
	
	set_real_ip_from    172.64.0.0/13;
	
	set_real_ip_from    131.0.72.0/22;
	
	aio                 threads;
	
	aio_write           on;
	
	tcp_nopush          on;
	tcp_nodelay         on;
	
	log_subrequest      on;
	
	reset_timedout_connection on;
	
	keepalive_timeout  75s;
	keepalive_requests 100000;
	
	client_body_temp_path           /tmp/nginx/client-body;
	fastcgi_temp_path               /tmp/nginx/fastcgi-temp;
	proxy_temp_path                 /tmp/nginx/proxy-temp;
	
	client_header_buffer_size       1k;
	client_header_timeout           60s;
	large_client_header_buffers     4 8k;
	client_body_buffer_size         8k;
	client_body_timeout             60s;
	
	http2_max_concurrent_streams    128;
	
	types_hash_max_size             2048;
	server_names_hash_max_size      1024;
	server_names_hash_bucket_size   64;
	map_hash_bucket_size            64;
	
	proxy_headers_hash_max_size     512;
	proxy_headers_hash_bucket_size  64;
	
	variables_hash_bucket_size      256;
	variables_hash_max_size         2048;
	
	underscores_in_headers          off;
	ignore_invalid_headers          on;
	
	limit_req_status                503;
	limit_conn_status               503;
	
	include /etc/nginx/mime.types;
	default_type text/html;
	
	brotli on;
	brotli_comp_level 4;
	brotli_min_length 20;
	brotli_types application/xml+rss application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/javascript text/plain text/x-component;
	
	gzip on;
	gzip_comp_level 5;
	gzip_http_version 1.1;
	gzip_min_length 1024;
	gzip_types application/atom+xml application/javascript application/x-javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/javascript text/plain text/x-component;
	gzip_proxied any;
	gzip_vary on;
	
	# Custom headers for response
	
	server_tokens off;
	
	more_clear_headers Server;
	
	# disable warnings
	uninitialized_variable_warn off;
	
	# Additional available variables:
	# $namespace
	# $ingress_name
	# $service_name
	# $service_port
	log_format upstreaminfo '{"host": "$http_host", "remote_addr": "$remote_addr", "request_id": "$request_id", "x-forward-for": "$proxy_add_x_forwarded_for", "remote_user": "$remote_user", "request": "$request", "uri": "$uri", "method": "$request_method", "status": $status, "http_referrer": "$http_referer", "http_user_agent": "$http_user_agent", "request_time": $request_time, "bytes_sent": $bytes_sent, "request_proto": "$server_protocol", "request_query": "$args", "request_length": $request_length, "upstream_addr": "$upstream_addr", "upstream_response_time": "$upstream_response_time", "upstream_status": "$upstream_status", "proxy_upstream_name": "$proxy_upstream_name", "country": "$http_cf_ipcountry", "component": "$http_x_component", "brand": "$http_x_brand", "cache_status": "$upstream_cache_status", "test": "$http_x_test"}';
	
	map $request_uri $loggable {
		
		default 1;
	}
	
	access_log /var/log/nginx/access.log upstreaminfo  if=$loggable;
	
	error_log  /var/log/nginx/error.log debug;
	
	resolver 10.12.0.10 valid=30s ipv6=off;
	
	# See https://www.nginx.com/blog/websocket-nginx
	map $http_upgrade $connection_upgrade {
		default          upgrade;
		
		# See https://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive
		''               '';
		
	}
	
	# Reverse proxies can detect if a client provides a X-Request-ID header, and pass it on to the backend server.
	# If no such header is provided, it can provide a random value.
	map $http_x_request_id $req_id {
		default   $http_x_request_id;
		
		""        $request_id;
		
	}
	
	# We can't use $proxy_add_x_forwarded_for because the realip module
	# replaces the remote_addr too soon
	map $http_x_forwarded_for $full_x_forwarded_for {
		
		default          "$http_x_forwarded_for, $realip_remote_addr";
		''               "$realip_remote_addr";
		
	}
	
	# Create a variable that contains the literal $ character.
	# This works because the geo module will not resolve variables.
	geo $literal_dollar {
		default "$";
	}
	
	server_name_in_redirect off;
	port_in_redirect        off;
	
	ssl_protocols TLSv1.2 TLSv1.3;
	
	ssl_early_data on;
	
	# turn on session caching to drastically improve performance
	
	ssl_session_cache shared:SSL:64m;
	ssl_session_timeout 1d;
	
	# allow configuring ssl session tickets
	ssl_session_tickets off;
	
	# slightly reduce the time-to-first-byte
	ssl_buffer_size 4k;
	
	# allow configuring custom ssl ciphers
	ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256';
	ssl_prefer_server_ciphers on;
	
	ssl_ecdh_curve auto;
	
	# PEM sha: 617fa83c3398823ce10885d62abe993477dc49fe
	ssl_certificate     /etc/ingress-controller/ssl/ingress-nginx-default-certificate.pem;
	ssl_certificate_key /etc/ingress-controller/ssl/ingress-nginx-default-certificate.pem;
	
	proxy_ssl_session_reuse on;
	
	# Custom code snippet configured in the configuration configmap
	proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=common_proxy_cache:120m max_size=2g inactive=7d use_temp_path=off;
	proxy_cache_key "$scheme$request_method$host$request_uri";
	datadog_appsec_enabled on;
	datadog_waf_thread_pool_name waf_thread_pool;
	
	upstream upstream_balancer {
		### Attention!!!
		#
		# We no longer create "upstream" section for every backend.
		# Backends are handled dynamically using Lua. If you would like to debug
		# and see what backends ingress-nginx has in its memory you can
		# install our kubectl plugin https://kubernetes.github.io/ingress-nginx/kubectl-plugin.
		# Once you have the plugin you can use "kubectl ingress-nginx backends" command to
		# inspect current backends.
		#
		###
		
		server 0.0.0.1; # placeholder
		
		balancer_by_lua_file /etc/nginx/lua/nginx/ngx_conf_balancer.lua;
		
		keepalive 4096;
		keepalive_time 1h;
		keepalive_timeout  120s;
		keepalive_requests 100000;
		
	}
	
	# Cache for internal auth checks
	proxy_cache_path /tmp/nginx/nginx-cache-auth levels=1:2 keys_zone=auth_cache:10m max_size=128m inactive=30m use_temp_path=off;
	
	# Global filters
	
	## start server _
	server {
		server_name _ ;
		
		http2 on;
		
		listen 80 default_server reuseport backlog=1024 ;
		listen 443 default_server reuseport backlog=1024 ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_reject_handshake off;
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		# Custom code snippet configured for host _
		return 444;
		
		location / {
			
			set $namespace      "ingress-nginx";
			set $ingress_name   "default-deny";
			set $service_name   "ingress-nginx-ingress-nginx-controller";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "ingress-nginx-ingress-nginx-ingress-nginx-controller-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
		# health checks in cloud providers require the use of port 80
		location /healthz {
			
			access_log off;
			return 200;
		}
		
		# this is required to avoid error if nginx is being monitored
		# with an external software (like sysdig)
		location /nginx_status {
			
			allow 127.0.0.1;
			
			deny all;
			
			access_log off;
			stub_status on;
		}
		
	}
	## end server _
	
	## start server airflow.infopandora.com
	server {
		server_name airflow.infopandora.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "airflow";
			set $ingress_name   "airflow-airflow-ingress";
			set $service_name   "airflow-airflow-api-server";
			set $service_port   "api-server";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "airflow-airflow-airflow-api-server-api-server";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server airflow.infopandora.com
	
	## start server jenkins.infopandora.com
	server {
		server_name jenkins.infopandora.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "jenkins";
			set $ingress_name   "jenkins";
			set $service_name   "jenkins";
			set $service_port   "8080";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "jenkins-jenkins-8080";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			client_max_body_size                    0;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      600s;
			proxy_read_timeout                      600s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server jenkins.infopandora.com
	
	## start server pwa-stage1a.infopandora.com
	server {
		server_name pwa-stage1a.infopandora.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "pwa-mediabuy-stage1";
			set $ingress_name   "pwa-mediabuy-private";
			set $service_name   "pwa-mediabuy";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "pwa-mediabuy-stage1-pwa-mediabuy-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server pwa-stage1a.infopandora.com
	
	## start server pwa-stage1b.infopandora.com
	server {
		server_name pwa-stage1b.infopandora.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "pwa-mediabuy-stage1";
			set $ingress_name   "pwa-mediabuy-private";
			set $service_name   "pwa-mediabuy";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "pwa-mediabuy-stage1-pwa-mediabuy-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server pwa-stage1b.infopandora.com
	
	## start server stage-cms.staycasino.com
	server {
		server_name stage-cms.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location /admin/ {
			
			set $namespace      "staycasino-stage1";
			set $ingress_name   "staycasino-cms-admin";
			set $service_name   "staycasino-cms";
			set $service_port   "80";
			set $location_path  "/admin";
			
			set $force_ssl_redirect "true";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage1-staycasino-cms-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: cms";
			more_set_input_headers "X-Brand: staycasino";
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
		location = /admin {
			
			set $namespace      "staycasino-stage1";
			set $ingress_name   "staycasino-cms-admin";
			set $service_name   "staycasino-cms";
			set $service_port   "80";
			set $location_path  "/admin";
			
			set $force_ssl_redirect "true";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage1-staycasino-cms-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: cms";
			more_set_input_headers "X-Brand: staycasino";
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
		location / {
			
			set $namespace      "staycasino-stage1";
			set $ingress_name   "staycasino-cms";
			set $service_name   "staycasino-cms";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "true";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage1-staycasino-cms-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 34.22.181.15/32;
			allow 35.234.103.20/32;
			deny all;
			
			# Cors Preflight methods needs additional options and different Return Code
			
			if ($http_origin ~* ((http://localhost:1337)|(http://127\.0\.0\.1:1337)|(https://stage-cms\.staycasino\.com)|(https://stage-cms\.staycasino\.com)|(https://strapi\.io))$ ) { set $cors 'true'; }
			
			if ($request_method = 'OPTIONS') {
				set $cors ${cors}options;
			}
			
			if ($cors = "true") {
				more_set_headers 'Access-Control-Allow-Origin: $http_origin';
				more_set_headers 'Access-Control-Allow-Credentials: true'; 
				more_set_headers 'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, PATCH, OPTIONS';
				more_set_headers 'Access-Control-Allow-Headers: DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization';
				
				more_set_headers 'Access-Control-Max-Age: 1728000';
			}
			
			if ($cors = "trueoptions") {
				more_set_headers 'Access-Control-Allow-Origin: $http_origin';
				more_set_headers 'Access-Control-Allow-Credentials: true'; 
				more_set_headers 'Access-Control-Allow-Methods: GET, PUT, POST, DELETE, PATCH, OPTIONS';
				more_set_headers 'Access-Control-Allow-Headers: DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization';
				
				more_set_headers 'Access-Control-Max-Age: 1728000';
				more_set_headers 'Content-Type: text/plain charset=UTF-8';
				more_set_headers 'Content-Length: 0';
				return 204;
			}
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: cms";
			more_set_input_headers "X-Brand: staycasino";
			if ($request_uri ~* "^/admin") {
				return 404;
			}
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage-cms.staycasino.com
	
	## start server stage1.corehiddenjack.com
	server {
		server_name stage1.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage1";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage1-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.corehiddenjack.com
	
	## start server stage1.corewinbeast.com
	server {
		server_name stage1.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage1";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage1-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.corewinbeast.com
	
	## start server stage1.crusino.com
	server {
		server_name stage1.crusino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "crusino-stage1";
			set $ingress_name   "crusino";
			set $service_name   "crusino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "crusino-stage1-crusino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: crusino";
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.crusino.com
	
	## start server stage1.richardcasino.com
	server {
		server_name stage1.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage1";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage1-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache $http_range;
			proxy_no_cache $skip_cache $http_range;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1524-merge-4352";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_lock_timeout 10s;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			proxy_ignore_client_abort on;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.richardcasino.com
	
	## start server stage1.slotozen.com
	server {
		server_name stage1.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage1";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage1-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: slotozen";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-2009-merge-767";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.slotozen.com
	
	## start server stage1.staycasino.com
	server {
		server_name stage1.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage1";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage1-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.staycasino.com
	
	## start server stage1.wantedwin.com
	server {
		server_name stage1.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage1";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage1-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: wantedwin";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-740-merge-2084";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage1.wantedwin.com
	
	## start server stage2.corehiddenjack.com
	server {
		server_name stage2.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage2";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage2-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.corehiddenjack.com
	
	## start server stage2.corewinbeast.com
	server {
		server_name stage2.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage2";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage2-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.corewinbeast.com
	
	## start server stage2.crusino.com
	server {
		server_name stage2.crusino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "crusino-stage2";
			set $ingress_name   "crusino";
			set $service_name   "crusino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "crusino-stage2-crusino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 193.57.95.181/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.crusino.com
	
	## start server stage2.richardcasino.com
	server {
		server_name stage2.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage2";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage2-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1522-merge-4339-2";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_lock_timeout 10s;
			proxy_ignore_client_abort on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.richardcasino.com
	
	## start server stage2.slotozen.com
	server {
		server_name stage2.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage2";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage2-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: slotozen";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-2008-merge-764";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.slotozen.com
	
	## start server stage2.staycasino.com
	server {
		server_name stage2.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage2";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage2-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.staycasino.com
	
	## start server stage2.wantedwin.com
	server {
		server_name stage2.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage2";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage2-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: wantedwin";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-737-merge-2066";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage2.wantedwin.com
	
	## start server stage3.corehiddenjack.com
	server {
		server_name stage3.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage3";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage3-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 193.57.95.181/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.corehiddenjack.com
	
	## start server stage3.corewinbeast.com
	server {
		server_name stage3.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage3";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage3-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.corewinbeast.com
	
	## start server stage3.crusino.com
	server {
		server_name stage3.crusino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "crusino-stage3";
			set $ingress_name   "crusino";
			set $service_name   "crusino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "crusino-stage3-crusino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.crusino.com
	
	## start server stage3.richardcasino.com
	server {
		server_name stage3.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage3";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage3-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache $http_range;
			proxy_no_cache $skip_cache $http_range;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1512-merge-4425";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_lock_timeout 10s;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			proxy_ignore_client_abort on;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.richardcasino.com
	
	## start server stage3.slotozen.com
	server {
		server_name stage3.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage3";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage3-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.slotozen.com
	
	## start server stage3.staycasino.com
	server {
		server_name stage3.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage3";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage3-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.staycasino.com
	
	## start server stage3.wantedwin.com
	server {
		server_name stage3.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage3";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage3-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: wantedwin";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-737-merge-2072";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage3.wantedwin.com
	
	## start server stage4.corehiddenjack.com
	server {
		server_name stage4.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage4";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage4-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.corehiddenjack.com
	
	## start server stage4.corewinbeast.com
	server {
		server_name stage4.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage4";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage4-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.corewinbeast.com
	
	## start server stage4.richardcasino.com
	server {
		server_name stage4.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage4";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage4-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache $http_range;
			proxy_no_cache $skip_cache $http_range;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1514-merge-4429";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_lock_timeout 10s;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			proxy_ignore_client_abort on;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.richardcasino.com
	
	## start server stage4.slotozen.com
	server {
		server_name stage4.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage4";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage4-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: slotozen";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1994-merge-700";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.slotozen.com
	
	## start server stage4.staycasino.com
	server {
		server_name stage4.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage4";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage4-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.staycasino.com
	
	## start server stage4.wantedwin.com
	server {
		server_name stage4.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage4";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage4-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage4.wantedwin.com
	
	## start server stage5.corehiddenjack.com
	server {
		server_name stage5.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage5";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage5-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.corehiddenjack.com
	
	## start server stage5.corewinbeast.com
	server {
		server_name stage5.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage5";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage5-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.corewinbeast.com
	
	## start server stage5.crusino.com
	server {
		server_name stage5.crusino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "crusino-stage5";
			set $ingress_name   "crusino";
			set $service_name   "crusino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "crusino-stage5-crusino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.crusino.com
	
	## start server stage5.richardcasino.com
	server {
		server_name stage5.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage5";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage5-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache $http_range;
			proxy_no_cache $skip_cache $http_range;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1510-merge-4403";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_lock_timeout 10s;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			proxy_ignore_client_abort on;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.richardcasino.com
	
	## start server stage5.slotozen.com
	server {
		server_name stage5.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage5";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage5-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: slotozen";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 1;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-2006-merge-754";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.slotozen.com
	
	## start server stage5.staycasino.com
	server {
		server_name stage5.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage5";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage5-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.staycasino.com
	
	## start server stage5.wantedwin.com
	server {
		server_name stage5.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage5";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage5-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage5.wantedwin.com
	
	## start server stage6.corehiddenjack.com
	server {
		server_name stage6.corehiddenjack.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "hiddenjack-stage6";
			set $ingress_name   "hiddenjack";
			set $service_name   "hiddenjack";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "hiddenjack-stage6-hiddenjack-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 34.89.217.176/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.corehiddenjack.com
	
	## start server stage6.corewinbeast.com
	server {
		server_name stage6.corewinbeast.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "winbeast-stage6";
			set $ingress_name   "winbeast-private";
			set $service_name   "winbeast";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "winbeast-stage6-winbeast-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.corewinbeast.com
	
	## start server stage6.richardcasino.com
	server {
		server_name stage6.richardcasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "richard-stage6";
			set $ingress_name   "richard";
			set $service_name   "richard";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "richard-stage6-richard-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         on;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			more_set_input_headers "X-Component: frontend";
			more_set_input_headers "X-Brand: richard";
			if ($http_user_agent ~* "(HeadlessChrome|PhantomJS|Selenium)") {
				return 403;
			}
			if ($request_uri ~* "\.php$|/wp-includes/|/apple-touch-icon\.png|/\.well-known/assetlinks\.json") {
				return 404;
			}
			set $skip_cache 1;
			# Cache only /_ipx/ and /_nuxt/ paths
			if ($request_uri ~* "^/(_ipx|_nuxt|__nuxt_content|_i18n)/") {
				set $skip_cache 0;
			}
			proxy_cache_bypass $skip_cache;
			proxy_no_cache $skip_cache;
			proxy_cache common_proxy_cache;
			proxy_cache_key "$scheme$request_method$host$uri-1521-merge-4324";
			proxy_cache_valid 200 301 302 7d;
			proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
			proxy_cache_background_update on;
			proxy_cache_lock on;
			proxy_cache_methods GET HEAD;
			proxy_ignore_headers Cache-Control Expires;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.richardcasino.com
	
	## start server stage6.slotozen.com
	server {
		server_name stage6.slotozen.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "slotozen-stage6";
			set $ingress_name   "slotozen";
			set $service_name   "slotozen";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "slotozen-stage6-slotozen-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 193.57.95.181/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.slotozen.com
	
	## start server stage6.staycasino.com
	server {
		server_name stage6.staycasino.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "staycasino-stage6";
			set $ingress_name   "staycasino";
			set $service_name   "staycasino";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "staycasino-stage6-staycasino-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 193.57.95.181/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.staycasino.com
	
	## start server stage6.wantedwin.com
	server {
		server_name stage6.wantedwin.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "wantedwin-stage6";
			set $ingress_name   "wantedwin";
			set $service_name   "wantedwin";
			set $service_port   "80";
			set $location_path  "/";
			
			set $force_ssl_redirect "false";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "wantedwin-stage6-wantedwin-80";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			allow 167.172.99.179/32;
			allow 192.162.184.41/32;
			allow 34.77.71.241/32;
			allow 35.234.103.20/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      60s;
			proxy_read_timeout                      60s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server stage6.wantedwin.com
	
	## start server vault-stage.infopandora.com
	server {
		server_name vault-stage.infopandora.com ;
		
		http2 on;
		
		listen 80  ;
		listen 443  ssl;
		
		set $proxy_upstream_name "-";
		
		ssl_certificate_by_lua_file /etc/nginx/lua/nginx/ngx_conf_certificate.lua;
		
		location / {
			
			set $namespace      "vault";
			set $ingress_name   "vault-vault";
			set $service_name   "vault-vault";
			set $service_port   "8200";
			set $location_path  "/";
			
			set $force_ssl_redirect "true";
			set $ssl_redirect "true";
			set $force_no_ssl_redirect "false";
			set $preserve_trailing_slash "false";
			set $use_port_in_redirects "false";
			
			rewrite_by_lua_file /etc/nginx/lua/nginx/ngx_rewrite.lua;
			
			header_filter_by_lua_file /etc/nginx/lua/nginx/ngx_conf_srv_hdr_filter.lua;
			
			log_by_lua_file /etc/nginx/lua/nginx/ngx_conf_log_block.lua;
			
			port_in_redirect off;
			
			set $balancer_ewma_score -1;
			set $proxy_upstream_name "vault-vault-vault-8200";
			set $proxy_host          $proxy_upstream_name;
			set $pass_access_scheme  $scheme;
			
			set $pass_server_port    $server_port;
			
			set $best_http_host      $http_host;
			set $pass_port           $pass_server_port;
			
			set $proxy_alternative_upstream_name "";
			
			allow 151.115.48.207/32;
			deny all;
			
			client_max_body_size                    1m;
			
			proxy_set_header Host                   $best_http_host;
			
			# Pass the extracted client certificate to the backend
			
			# Allow websocket connections
			proxy_set_header                        Upgrade           $http_upgrade;
			
			proxy_set_header                        Connection        $connection_upgrade;
			
			proxy_set_header X-Request-ID           $req_id;
			proxy_set_header X-Real-IP              $remote_addr;
			
			proxy_set_header X-Forwarded-For        $full_x_forwarded_for;
			
			proxy_set_header X-Forwarded-Host       $best_http_host;
			proxy_set_header X-Forwarded-Port       $pass_port;
			proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
			proxy_set_header X-Forwarded-Scheme     $pass_access_scheme;
			
			proxy_set_header X-Scheme               $pass_access_scheme;
			
			# Pass the original X-Forwarded-For
			proxy_set_header X-Original-Forwarded-For  $http_cf_connecting_ip;
			# Pass the original X-Forwarded-Host
			proxy_set_header X-Original-Forwarded-Host $http_x_forwarded_host;
			
			# mitigate HTTPoxy Vulnerability
			# https://www.nginx.com/blog/mitigating-the-httpoxy-vulnerability-with-nginx/
			proxy_set_header Proxy                  "";
			
			# Custom headers to proxied server
			
			proxy_connect_timeout                   5s;
			proxy_send_timeout                      600s;
			proxy_read_timeout                      600s;
			
			proxy_buffering                         off;
			proxy_buffer_size                       4k;
			proxy_buffers                           4 4k;
			
			proxy_max_temp_file_size                1024m;
			
			proxy_request_buffering                 off;
			proxy_http_version                      1.1;
			
			proxy_cookie_domain                     off;
			proxy_cookie_path                       off;
			
			# In case of errors try the next upstream server before returning an error
			proxy_next_upstream                     error timeout;
			proxy_next_upstream_timeout             0;
			proxy_next_upstream_tries               3;
			
			# Custom Response Headers
			
			proxy_pass http://upstream_balancer;
			
			proxy_redirect                          off;
			
		}
		
	}
	## end server vault-stage.infopandora.com
	
	# backend for when default-backend-service is not configured or it does not have endpoints
	server {
		listen 8181 default_server reuseport backlog=1024;
		
		set $proxy_upstream_name "internal";
		
		access_log off;
		
		location / {
			return 404;
		}
	}
	
	# default server, used for NGINX healthcheck and access to nginx stats
	server {
		# Ensure that modsecurity will not run on an internal location as this is not accessible from outside
		
		listen 127.0.0.1:10246;
		set $proxy_upstream_name "internal";
		
		keepalive_timeout 0;
		gzip off;
		
		access_log off;
		
		location /healthz {
			return 200;
		}
		
		location /is-dynamic-lb-initialized {
			content_by_lua_file /etc/nginx/lua/nginx/ngx_conf_is_dynamic_lb_initialized.lua;
		}
		
		location /nginx_status {
			stub_status on;
		}
		
		location /configuration {
			client_max_body_size                    21M;
			client_body_buffer_size                 21M;
			proxy_buffering                         off;
			
			content_by_lua_file /etc/nginx/lua/nginx/ngx_conf_configuration.lua;
		}
		
		location / {
			return 404;
		}
	}
}

stream {
	lua_package_path "/etc/nginx/lua/?.lua;/etc/nginx/lua/vendor/?.lua;;";
	
	lua_shared_dict tcp_udp_configuration_data 5M;
	
	resolver 10.12.0.10 valid=30s ipv6=off;
	
	init_by_lua_file /etc/nginx/lua/ngx_conf_init_stream.lua;
	
	init_worker_by_lua_file /etc/nginx/lua/nginx/ngx_conf_init_tcp_udp.lua;
	
	lua_add_variable $proxy_upstream_name;
	
	log_format log_stream '[$remote_addr] [$time_local] $protocol $status $bytes_sent $bytes_received $session_time';
	
	access_log /var/log/nginx/access.log log_stream ;
	
	error_log  /var/log/nginx/error.log debug;
	
	set_real_ip_from    130.211.0.0/22;
	
	set_real_ip_from    35.191.0.0/16;
	
	set_real_ip_from    173.245.48.0/20;
	
	set_real_ip_from    103.21.244.0/22;
	
	set_real_ip_from    103.22.200.0/22;
	
	set_real_ip_from    103.31.4.0/22;
	
	set_real_ip_from    141.101.64.0/18;
	
	set_real_ip_from    108.162.192.0/18;
	
	set_real_ip_from    190.93.240.0/20;
	
	set_real_ip_from    188.114.96.0/20;
	
	set_real_ip_from    197.234.240.0/22;
	
	set_real_ip_from    198.41.128.0/17;
	
	set_real_ip_from    162.158.0.0/15;
	
	set_real_ip_from    104.16.0.0/13;
	
	set_real_ip_from    104.24.0.0/14;
	
	set_real_ip_from    172.64.0.0/13;
	
	set_real_ip_from    131.0.72.0/22;
	
	upstream upstream_balancer {
		server 0.0.0.1:1234; # placeholder
		balancer_by_lua_file /etc/nginx/lua/nginx/ngx_conf_balancer_tcp_udp.lua;
	}
	
	server {
		listen 127.0.0.1:10247;
		
		access_log off;
		
		content_by_lua_file /etc/nginx/lua/nginx/ngx_conf_content_tcp_udp.lua;
	}
	
	# TCP services
	
	# UDP services
	
	# Stream Snippets
	
}

